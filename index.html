<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>WinCash — شحن منصّات المراهنات</title>
<meta name="theme-color" content="#8A56F0">
<style>
  :root{
    --ink:#E5E7EB;--muted:#9CA3AF;--line:#2a2f3a;--card:#0f1320;--bg:#0b1020;
    --grad1:#f69c5e;--grad2:#dd2a7b;--grad3:#8a56f0;--grad4:#4f6af2;
    --ok:#16a34a;--warn:#f59e0b;--danger:#ef4444;
    --radius:18px;--shadow:0 10px 28px rgba(0,0,0,.35);
  }
  *{box-sizing:border-box}html,body{height:100%}
  body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Tahoma,Arial,sans-serif;color:var(--ink);
    background:#0b1020;}
  a{color:inherit;text-decoration:none}

  .nav{position:sticky;top:0;z-index:50;background:#0c1222cc;backdrop-filter:blur(8px);border-bottom:1px solid #151a25}
  .nav-inner{max-width:980px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:10px 14px}
  .brand{display:flex;align-items:center;gap:10px}
  .logo-dot{width:26px;height:26px;border-radius:8px;background:conic-gradient(from 200deg,var(--grad1),var(--grad2),var(--grad3),var(--grad4),var(--grad1))}
  .brand-name{font-weight:900}
  .brand-name b{background:linear-gradient(90deg,var(--grad1),var(--grad2),var(--grad3),var(--grad4));-webkit-background-clip:text;color:transparent}
  .cta{padding:10px 16px;border:none;border-radius:999px;color:#0b1020;font-weight:800;cursor:pointer;background:linear-gradient(90deg,var(--grad1),var(--grad2),var(--grad3),var(--grad4))}

  .wrap{max-width:980px;margin:0 auto;padding:18px 14px 90px}

  .hero{margin:14px 0;background:var(--card);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
  .hero-top{padding:26px;background:linear-gradient(135deg,#0f1320,#0f1424)}
  .title{font-size:22px;margin:0 0 8px}
  .subtitle{color:var(--muted);font-size:14px}
  .hero-actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
  .ghost{background:transparent;border:1px solid var(--line);color:#E5E7EB}
  .badges{display:flex;gap:8px;flex-wrap:wrap;margin-top:14px}
  .badge{font-size:12px;border:1px solid var(--line);border-radius:999px;padding:6px 10px;background:#10162a;color:#cbd5e1}

  .section{margin:22px 0}
  .section h3{margin:0 0 12px;font-size:18px}
  .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
  @media(min-width:480px){.grid{grid-template-columns:repeat(3,1fr)}}
  @media(min-width:760px){.grid{grid-template-columns:repeat(4,1fr)}}
  .card{background:#0f1426;border:1px solid var(--line);border-radius:16px;padding:12px;text-align:center;cursor:pointer}
  .card:hover{transform:translateY(-2px)}
  .icon{width:34px;height:34px;border-radius:12px;display:inline-grid;place-items:center;margin:2px auto 6px}
  .icon span{font-weight:900;font-size:12px;color:#fff}
  .label{margin-top:4px;font-weight:800;font-size:13px}
  .muted{font-size:12px;color:var(--muted)}

  .faq{background:#0f1426;border:1px solid var(--line);border-radius:16px;padding:12px}
  .footer{margin-top:18px;padding:16px;border-top:1px solid #151a25;color:#9CA3AF;font-size:12px;text-align:center}

  .overlay{position:fixed;inset:0;background:rgba(4,6,12,.6);backdrop-filter:blur(6px);display:none;align-items:center;justify-content:center;z-index:80}
  .overlay.show{display:flex}
  .sheet{width:min(620px,92vw);background:#0f1426;border-radius:18px;border:1px solid var(--line);overflow:hidden}
  .sheet-head{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--line)}
  .sheet-body{padding:14px 16px}
  .field{display:grid;gap:6px;margin:10px 0}
  .field input{width:100%;padding:12px;border:1px solid #2b3342;border-radius:12px;background:#0c1222;color:#e5e7eb}
  .btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 16px;border:none;border-radius:12px;color:#0b1020;font-weight:900;background:linear-gradient(90deg,var(--grad1),var(--grad2),var(--grad3),var(--grad4));cursor:pointer;width:100%;margin-top:10px}
  #imageBox img{max-width:100%;border-radius:12px;margin-top:6px}
  .delete-image-btn{position:absolute;top:6px;right:6px;background:#ef4444;color:#fff;border:none;border-radius:50%;width:28px;height:28px;cursor:pointer}
</style>
</head>
<body>
<header class="nav"><div class="nav-inner"><div class="brand"><span class="logo-dot"></span><div class="brand-name">Win<b>Cash</b></div></div><button class="cta" onclick="document.getElementById('platforms').scrollIntoView({behavior:'smooth'})">ابدأ الآن</button></div></header>

<main class="wrap">
  <section class="hero">
    <div class="hero-top">
      <h1 class="title">شحن منصّاتك بسرعة وأمان</h1>
      <p class="subtitle">اختر المنصة، أدخل الـ ID، ادفع محليًا، التنفيذ خلال دقائق.</p>
    </div>
  </section>

  <section id="platforms" class="section"><h3>اختيار المنصّة</h3><div id="platformGrid" class="grid"></div></section>
  <footer class="footer">© 2025 — WinCash</footer>
</main>

<!-- Modal شحن -->
<div class="overlay" id="modal">
  <div class="sheet">
    <div class="sheet-head"><strong id="sheetTitle">طلب شحن</strong><button class="x" onclick="closeModal()">×</button></div>
    <div class="sheet-body">
      <form id="chargeForm">
        <input type="hidden" id="platformInput">
        <div class="field"><label>معرّف الحساب</label><input id="userId" required></div>
        <div class="field"><label>المبلغ</label><input id="amount" type="number" required></div>
        <button class="btn" type="submit">تنفيذ الطلب</button>
      </form>
    </div>
  </div>
</div>

<!-- Modal دفع -->
<div class="overlay" id="payOverlay">
  <div class="sheet">
    <div class="sheet-head"><strong>إعادة تعبئة الحساب</strong><button class="x" onclick="closePay()">×</button></div>
    <div class="sheet-body">
      <form id="transferForm">
        <input type="hidden" id="platformSend">
        <div class="field"><label>المبلغ</label><input id="amountPay" type="number" required></div>
        <div class="field"><label>الإسم الكامل</label><input id="fullname" type="text" required></div>
        <div class="field"><label>صورة التحويل</label><input id="proof" type="file" accept="image/*" required></div>
        <div id="imageBox"></div>
        <button id="submitBtnPay" class="btn" type="submit">تأكيد التحويل</button>
      </form>
      <div id="waveLoader" style="display:none;text-align:center;margin-top:10px">⏳ جاري المعالجة...</div>
    </div>
  </div>
</div>

<script>
const platforms=[
  {key:'1xbet',name:'1xBet',tag:'1X',grad:['#4f6af2','#58a6ff']},
  {key:'melbet',name:'Melbet',tag:'MB',grad:['#dd2a7b','#8a56f0']},
  {key:'linebet',name:'Linebet',tag:'LB',grad:['#f69c5e','#dd2a7b']}
];
const grid=document.getElementById('platformGrid');
function badgeIcon(p){const[c1,c2]=p.grad;return`<div class="icon" style="background:linear-gradient(120deg,${c1},${c2})"><span>${p.tag}</span></div>`;}
platforms.forEach(p=>{const card=document.createElement('button');card.className='card';card.innerHTML=`${badgeIcon(p)}<div class="label">${p.name}</div><div class="muted">شحن سريع</div>`;card.onclick=()=>openModal(p.name,p.key);grid.appendChild(card);});

const modal=document.getElementById('modal');const payOverlay=document.getElementById('payOverlay');
function openModal(n,k){document.getElementById('sheetTitle').textContent=`طلب شحن — ${n}`;document.getElementById('platformInput').value=k;modal.classList.add('show');}
function closeModal(){modal.classList.remove('show');}
function closePay(){payOverlay.classList.remove('show');}

document.getElementById("chargeForm").onsubmit=function(e){
  e.preventDefault();
  document.getElementById("platformSend").value=document.getElementById("platformInput").value;
  modal.classList.remove("show");payOverlay.classList.add("show");
};

document.getElementById("proof").addEventListener("change",function(){
  const imageBox=document.getElementById("imageBox");imageBox.innerHTML="";
  const file=this.files[0];if(!file)return;
  const reader=new FileReader();reader.onload=function(e){
    const img=document.createElement("img");img.src=e.target.result;imageBox.appendChild(img);
    const delBtn=document.createElement("button");delBtn.className="delete-image-btn";delBtn.innerHTML="×";
    delBtn.onclick=function(){img.remove();delBtn.remove();document.getElementById("proof").value="";};
    imageBox.appendChild(delBtn);
  };reader.readAsDataURL(file);
});

async function resizeImage(file,maxWidth=800,maxHeight=800){
  return new Promise((resolve,reject)=>{
    const img=new Image();const reader=new FileReader();
    reader.onload=e=>img.src=e.target.result;
    img.onload=()=>{let w=img.width,h=img.height;
      if(w>h&&w>maxWidth){h*=maxWidth/w;w=maxWidth;}
      else if(h>maxHeight){w*=maxHeight/h;h=maxHeight;}
      const canvas=document.createElement("canvas");canvas.width=w;canvas.height=h;
      canvas.getContext("2d").drawImage(img,0,0,w,h);
      canvas.toBlob(blob=>resolve(blob),"image/jpeg",0.7);
    };
    reader.onerror=reject;reader.readAsDataURL(file);
  });
}
async function blobToBase64(blob){return new Promise((resolve,reject)=>{const r=new FileReader();r.onloadend=()=>resolve(r.result);r.onerror=reject;r.readAsDataURL(blob);});}

document.getElementById("transferForm").onsubmit=async function(e){
  e.preventDefault();
  const amount=document.getElementById("amountPay").value.trim();
  const fullname=document.getElementById("fullname").value.trim();
  const platform=document.getElementById("platformSend").value;
  const file=document.getElementById("proof").files[0];
  if(!file)return;
  document.getElementById("waveLoader").style.display="block";
  document.getElementById("submitBtnPay").disabled=true;
  try{
    const compressed=await resizeImage(file);
    const imageBase64=await blobToBase64(compressed);
    const res=await fetch("https://script.google.com/macros/s/AKfycbwC_bDa2MnGmitv1XmuLXbPlzGPgdxT-oPwW5IrC4aevFNe9kDK4FwhmbwFcDqlaCm7/exec",{
      method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},
      body:new URLSearchParams({amount,fullname,platform,imageBase64})
    });
    if(res.ok){alert("✅ تم إرسال الطلب بنجاح");payOverlay.classList.remove("show");}
  }catch(err){console.error(err);}
  finally{document.getElementById("waveLoader").style.display="none";document.getElementById("submitBtnPay").disabled=false;}
};
</script>
</body>
</html>
